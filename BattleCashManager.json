{
  "contractName": "BattleCashManager",
  "constructorInputs": [
    {
      "name": "BattleCashArenaTemplate",
      "type": "bytes"
    }
  ],
  "abi": [
    {
      "name": "createBattle",
      "inputs": [
        {
          "name": "owner",
          "type": "bytes20"
        },
        {
          "name": "prizeId",
          "type": "bytes32"
        },
        {
          "name": "championId1",
          "type": "bytes32"
        },
        {
          "name": "championId2",
          "type": "bytes32"
        }
      ]
    }
  ],
  "bytecode": "OP_TXINPUTCOUNT OP_3 OP_NUMEQUALVERIFY OP_0 OP_UTXOTOKENCATEGORY OP_0 OP_EQUAL OP_NOT OP_0 OP_UTXOTOKENCATEGORY OP_SIZE OP_NIP 20 OP_NUMEQUAL OP_BOOLAND OP_0 OP_UTXOTOKENCOMMITMENT OP_0 OP_EQUAL OP_NOT OP_BOOLAND OP_VERIFY OP_1 OP_UTXOTOKENCATEGORY OP_0 OP_EQUAL OP_NOT OP_1 OP_UTXOTOKENCATEGORY OP_SIZE OP_NIP 20 OP_NUMEQUAL OP_BOOLAND OP_1 OP_UTXOTOKENCOMMITMENT OP_0 OP_EQUAL OP_BOOLAND OP_VERIFY OP_2 OP_UTXOTOKENCATEGORY OP_0 OP_EQUAL OP_2 OP_UTXOVALUE d007 OP_GREATERTHANOREQUAL OP_BOOLAND OP_VERIFY OP_0 OP_BEGIN OP_0 OP_OUTPUTTOKENCATEGORY OP_0 OP_UTXOTOKENCATEGORY OP_EQUALVERIFY OP_0 OP_OUTPUTTOKENCOMMITMENT OP_0 OP_UTXOTOKENCOMMITMENT OP_EQUALVERIFY OP_0 OP_OUTPUTVALUE OP_0 OP_UTXOVALUE OP_NUMEQUALVERIFY OP_DUP OP_1ADD OP_NIP OP_DUP OP_3 OP_GREATERTHANOREQUAL OP_UNTIL OP_0 OP_OUTPUTBYTECODE aa20 20 OP_8 OP_PICK OP_CAT 20 OP_CAT OP_7 OP_PICK OP_CAT 20 OP_CAT OP_6 OP_PICK OP_CAT 14 OP_CAT OP_5 OP_PICK OP_CAT OP_4 OP_PICK OP_CAT OP_HASH256 OP_CAT 87 OP_CAT OP_EQUALVERIFY OP_0 OP_OUTPUTTOKENAMOUNT OP_0 OP_UTXOTOKENAMOUNT OP_NUMEQUALVERIFY OP_INPUTINDEX OP_OUTPUTBYTECODE OP_INPUTINDEX OP_UTXOBYTECODE OP_EQUALVERIFY OP_INPUTINDEX OP_OUTPUTTOKENAMOUNT OP_INPUTINDEX OP_UTXOTOKENAMOUNT OP_5 OP_SUB OP_NUMEQUALVERIFY OP_INPUTINDEX OP_1ADD OP_OUTPUTBYTECODE aa20 20 OP_8 OP_ROLL OP_CAT 20 OP_CAT OP_7 OP_ROLL OP_CAT 20 OP_CAT OP_6 OP_ROLL OP_CAT 14 OP_CAT OP_5 OP_ROLL OP_CAT OP_4 OP_ROLL OP_CAT OP_HASH256 OP_CAT 87 OP_CAT OP_EQUALVERIFY OP_INPUTINDEX OP_1ADD OP_OUTPUTTOKENAMOUNT OP_5 OP_NUMEQUALVERIFY OP_2 OP_UTXOVALUE d007 OP_NUMEQUAL OP_IF OP_TXOUTPUTCOUNT OP_3 OP_NUMEQUALVERIFY OP_ELSE OP_TXOUTPUTCOUNT OP_4 OP_NUMEQUALVERIFY OP_3 OP_OUTPUTBYTECODE OP_2 OP_UTXOBYTECODE OP_EQUALVERIFY OP_3 OP_OUTPUTTOKENCATEGORY OP_0 OP_EQUAL OP_3 OP_OUTPUTVALUE OP_2 OP_UTXOVALUE d007 OP_SUB OP_NUMEQUAL OP_BOOLAND OP_VERIFY OP_ENDIF OP_DROP OP_1",
  "source": "pragma cashscript ^0.13.0;\r\n\r\ncontract BattleCashManager(bytes BattleCashArenaTemplate) {\r\n\r\n    function createBattle(bytes20 owner, bytes32 prizeId, bytes32 championId1, bytes32 championId2) {\r\n        \r\n        require(tx.inputs.length == 3);\r\n\r\n        require(tx.inputs[0].tokenCategory != 0x && tx.inputs[0].tokenCategory.length == 32 && tx.inputs[0].nftCommitment != 0x);\r\n\r\n        require(tx.inputs[1].tokenCategory != 0x && tx.inputs[1].tokenCategory.length == 32 && tx.inputs[1].nftCommitment == 0x);\r\n\r\n        require(tx.inputs[2].tokenCategory == 0x && tx.inputs[2].value >= 2000);\r\n\r\n        int outputIndex = 0;\r\n\r\n        do {\r\n            require(tx.outputs[0].tokenCategory == tx.inputs[0].tokenCategory);\r\n            require(tx.outputs[0].nftCommitment == tx.inputs[0].nftCommitment);\r\n            require(tx.outputs[0].value == tx.inputs[0].value);\r\n            outputIndex = outputIndex + 1;\r\n        } while(outputIndex < 3);\r\n\r\n        require(tx.outputs[0].lockingBytecode == new LockingBytecodeP2SH32(hash256(bytes1(0x20) + championId2 + bytes1(0x20) + championId1 + bytes1(0x20) + prizeId + bytes1(0x14) + owner + BattleCashArenaTemplate)));\r\n        require(tx.outputs[0].tokenAmount == tx.inputs[0].tokenAmount);\r\n        \r\n\r\n        require(tx.outputs[this.activeInputIndex].lockingBytecode == tx.inputs[this.activeInputIndex].lockingBytecode);\r\n        require(tx.outputs[this.activeInputIndex].tokenAmount == tx.inputs[this.activeInputIndex].tokenAmount - 5);\r\n\r\n        require(tx.outputs[this.activeInputIndex + 1].lockingBytecode == new LockingBytecodeP2SH32(hash256(bytes1(0x20) + championId2 + bytes1(0x20) + championId1 + bytes1(0x20) + prizeId + bytes1(0x14) + owner + BattleCashArenaTemplate)));\r\n        require(tx.outputs[this.activeInputIndex + 1].tokenAmount == 5);\r\n\r\n        if(tx.inputs[2].value == 2000){\r\n            require(tx.outputs.length == 3);\r\n        } else{\r\n            require(tx.outputs.length == 4);\r\n            require(tx.outputs[3].lockingBytecode == tx.inputs[2].lockingBytecode);\r\n            require(tx.outputs[3].tokenCategory == 0x && tx.outputs[3].value == tx.inputs[2].value - 2000);\r\n        }\r\n    }\r\n\r\n}",
  "debug": {
    "bytecode": "c3539d00ce00879100ce827701209c9a00cf0087919a6951ce00879151ce827701209c9a51cf00879a6952ce008752c602d007a29a69006500d100ce8800d200cf8800cc00c69d768b777653a26600cd02aa20012058797e01207e57797e01207e56797e01147e55797e54797eaa7e01877e8800d300d09dc0cdc0c788c0d3c0d055949dc08bcd02aa200120587a7e01207e577a7e01207e567a7e01147e557a7e547a7eaa7e01877e88c08bd3559d52c602d0079c63c4539d67c4549d53cd52c78853d1008753cc52c602d007949c9a69687551",
    "sourceMap": "7:16:7:32;:36::37;:8::39:1;9:26:9:27:0;:16::42:1;:46::48:0;:16:::1;;:62::63:0;:52::78:1;:::85;;:89::91:0;:52:::1;:16;:105::106:0;:95::121:1;:125::127:0;:95:::1;;:16;:8::129;11:26:11:27:0;:16::42:1;:46::48:0;:16:::1;;:62::63:0;:52::78:1;:::85;;:89::91:0;:52:::1;:16;:105::106:0;:95::121:1;:125::127:0;:95:::1;:16;:8::129;13:26:13:27:0;:16::42:1;:46::48:0;:16:::1;:62::63:0;:52::70:1;:74::78:0;:52:::1;:16;:8::80;15:26:15:27:0;17:8:22:33;18:31:18:32;:20::47:1;:61::62:0;:51::77:1;:12::79;19:31:19:32:0;:20::47:1;:61::62:0;:51::77:1;:12::79;20:31:20:32:0;:20::39:1;:53::54:0;:43::61:1;:12::63;21:26:21:37:0;:::41:1;:12::42;22:16:22:27:0;:30::31;17:8::33:1;;24:27:24:28:0;:16::45:1;:49::214:0;:90::94;:98::109;;:83:::1;:119::123:0;:83::124:1;:127::138:0;;:83:::1;:148::152:0;:83::153:1;:156::163:0;;:83:::1;:173::177:0;:83::178:1;:181::186:0;;:83:::1;:189::212:0;;:83:::1;:75::213;:49::214;;;:8::216;25:27:25:28:0;:16::41:1;:55::56:0;:45::69:1;:8::71;28:27:28:48:0;:16::65:1;:79::100:0;:69::117:1;:8::119;29:27:29:48:0;:16::61:1;:75::96:0;:65::109:1;:112::113:0;:65:::1;:8::115;31:27:31:48:0;:::52:1;:16::69;:73::238:0;:114::118;:122::133;;:107:::1;:143::147:0;:107::148:1;:151::162:0;;:107:::1;:172::176:0;:107::177:1;:180::187:0;;:107:::1;:197::201:0;:107::202:1;:205::210:0;;:107:::1;:213::236:0;;:107:::1;:99::237;:73::238;;;:8::240;32:27:32:48:0;:::52:1;:16::65;:69::70:0;:8::72:1;34:21:34:22:0;:11::29:1;:33::37:0;:11:::1;:38:36:9:0;35:20:35:37;:41::42;:12::44:1;36:14:40:9:0;37:20:37:37;:41::42;:12::44:1;38:31:38:32:0;:20::49:1;:63::64:0;:53::81:1;:12::83;39:31:39:32:0;:20::47:1;:51::53:0;:20:::1;:68::69:0;:57::76:1;:90::91:0;:80::98:1;:101::105:0;:80:::1;:57;:20;:12::107;36:14:40:9;5:4:41:5;",
    "logs": [],
    "requires": [
      {
        "ip": 3,
        "line": 7
      },
      {
        "ip": 22,
        "line": 9
      },
      {
        "ip": 40,
        "line": 11
      },
      {
        "ip": 50,
        "line": 13
      },
      {
        "ip": 57,
        "line": 18
      },
      {
        "ip": 62,
        "line": 19
      },
      {
        "ip": 67,
        "line": 20
      },
      {
        "ip": 104,
        "line": 24
      },
      {
        "ip": 109,
        "line": 25
      },
      {
        "ip": 114,
        "line": 28
      },
      {
        "ip": 121,
        "line": 29
      },
      {
        "ip": 152,
        "line": 31
      },
      {
        "ip": 157,
        "line": 32
      },
      {
        "ip": 165,
        "line": 35
      },
      {
        "ip": 169,
        "line": 37
      },
      {
        "ip": 174,
        "line": 38
      },
      {
        "ip": 187,
        "line": 39
      }
    ]
  },
  "compiler": {
    "name": "cashc",
    "version": "0.13.0-next.1"
  },
  "updatedAt": "2025-11-15T15:10:56.186Z"
}